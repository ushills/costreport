{% extends "shared/_layout.html" %}
{% block main_content %}

<h2>Forecast - {{ project }}</h2>

<div class="container forecast table-responsive">
    <table class="table table-hover table-sm">
        <thead>
            <tr>
                <th scope="col" style="width: 60px">Cost Code</th>
                <th scope="col">Description</th>
                <th scope="col">Cost Allowance</th>
                <th scope="col">Cost Forecast</th>
                <th scope="col">Remaining Allowance</th>
            </tr>
        </thead>
        <tbody>
            {% for f in forecast_detail %}
            {% if f.cost_allowance - f.cost_forecast < 0 %}
            <tr class="table-danger">
                {% else %}
            <tr>
                {% endif %}
                <td><a href="#">{{ f.cost_code }}</a></td>
                <td><a href="#">{{ f.cost_code_description }}</a></td>
                <td><a href="#">{{ '{:,}'.format(f.cost_allowance) }}</a></td>
                <td><a href="#">{{ '{:,}'.format(f.cost_forecast) }}</a></td>
                <td><a href="#">{{ '{:,}'.format(f.cost_allowance - f.cost_forecast) }}</a></td>
            </tr>
            {% endfor %}
            <tr>
                <td colspan="2">Totals</td>
                <td><a href="#">{{ '{:,}'.format(forecast_detail | sum(attribute='cost_allowance'))}}</a></td>
                <td><a href="#">{{ '{:,}'.format(forecast_detail | sum(attribute='cost_forecast'))}}</a></td>
                <td><a
                        href="#">{{ '{:,}'.format(forecast_detail | sum(attribute='cost_allowance') - forecast_detail | sum(attribute='cost_forecast'))}}</a>
                </td>
            </tr>
        </tbody>
    </table>
    <!-- Positive Progress Bar -->
    <div class="progress">
        <div class="progress-bar bg-success" role="progressbar" aria-valuemin="-100" aria-valuemax="0"
            aria-valuenow="50" style="width: 30%"></div>
    </div>

    <br>
    <!-- Negative Progress Bar -->
    <div class="progress">
        <div class="progress-bar" role="progressbar" style="width: 50%;  background-color:#e9ecef"></div>
        <div class="progress-bar bg-danger" role="progressbar" style="width: 50%;"></div>


    </div>
</div>

</div>

{% endblock %}